<!doctype html><html lang=en-us><head><title>Migrate your local PHP 7.2 setup to Homebrew v1.5.* - Andy Grunwald</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=author content="Andy Grunwald"><meta name=description content="A small guide on how you migrate your local Homebrew PHP setup while updating to Homebrew v1.5."><meta name=keywords content="php,homebrew,macOS,environment,engineering,programming"><meta property="og:title" content="Migrate your local PHP 7.2 setup to Homebrew v1.5.*"><meta property="og:description" content="A small guide on how you migrate your local Homebrew PHP setup while updating to Homebrew v1.5."><meta property="og:type" content="article"><meta property="og:url" content="https://andygrunwald.com/blog/migrate-your-local-php-7.2-setup-to-homebrew-v1.5./"><meta property="og:image" content="https://andygrunwald.com/img/andy-grunwald-opengraph.png"><meta property="article:section" content="post"><meta property="article:published_time" content="2018-04-10T17:14:20+02:00"><meta property="article:modified_time" content="2021-07-10T17:14:20+02:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://andygrunwald.com/img/andy-grunwald-opengraph.png"><meta name=twitter:title content="Migrate your local PHP 7.2 setup to Homebrew v1.5.*"><meta name=twitter:description content="A small guide on how you migrate your local Homebrew PHP setup while updating to Homebrew v1.5."><meta name=twitter:site content="@andygrunwald"><meta name=twitter:creator content="@andygrunwald"><meta name=robots content="index,follow"><meta name=googlebot content="index,follow"><link rel=canonical href=https://andygrunwald.com/blog/migrate-your-local-php-7.2-setup-to-homebrew-v1.5./><link rel=stylesheet href=https://andygrunwald.com/css/main.css><link rel="shortcut icon" type=image/x-icon href=https://andygrunwald.com/favicon.ico><link rel=apple-touch-icon sizes=57x57 href=https://andygrunwald.com/apple-icon-57x57.png><link rel=apple-touch-icon sizes=60x60 href=https://andygrunwald.com/apple-icon-60x60.png><link rel=apple-touch-icon sizes=72x72 href=https://andygrunwald.com/apple-icon-72x72.png><link rel=apple-touch-icon sizes=76x76 href=https://andygrunwald.com/apple-icon-76x76.png><link rel=apple-touch-icon sizes=114x114 href=https://andygrunwald.com/apple-icon-114x114.png><link rel=apple-touch-icon sizes=120x120 href=https://andygrunwald.com/apple-icon-120x120.png><link rel=apple-touch-icon sizes=144x144 href=https://andygrunwald.com/apple-icon-144x144.png><link rel=apple-touch-icon sizes=152x152 href=https://andygrunwald.com/apple-icon-152x152.png><link rel=apple-touch-icon sizes=180x180 href=https://andygrunwald.com/apple-icon-180x180.png><link rel=icon type=image/png sizes=192x192 href=https://andygrunwald.com/android-icon-192x192.png><link rel=icon type=image/png sizes=32x32 href=https://andygrunwald.com/favicon-32x32.png><link rel=icon type=image/png sizes=96x96 href=https://andygrunwald.com/favicon-96x96.png><link rel=icon type=image/png sizes=16x16 href=https://andygrunwald.com/favicon-16x16.png><link rel=manifest href=https://andygrunwald.com/site.webmanifest><meta name=msapplication-TileColor content="#ffffff"><meta name=msapplication-TileImage content="https://andygrunwald.com/ms-icon-144x144.png"><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.9.0/css/solid.min.css><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.9.0/css/brands.min.css><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.9.0/css/fontawesome.min.css><link href="//fonts.googleapis.com/css?family=Source+Sans+Pro:400,700,700italic,400italic" rel=stylesheet type=text/css></head><body><header class=site-header><div class=branding><a href=https://andygrunwald.com/><img class=avatar src=https://andygrunwald.com/img/avatar.png alt=avatar></a><h1 class=site-title><a href=https://andygrunwald.com/>Andy Grunwald</a></h1></div><nav class=site-nav><ul><li><a href=https://andygrunwald.com/>Blog</a></li><li><a href=https://andygrunwald.com/about/>About</a></li><li class=icon><a href=https://andygrunwald.com/index.xml title=Subcribe><i class="fas fa-fw fa-rss"></i></a></li><li class=icon><a href=mailto:andygrunwald@gmail.com title=Email><i class="fas fa-fw fa-envelope"></i></a></li><li class=icon><a href=https://github.com/andygrunwald rel=me title=GitHub><i class="fab fa-fw fa-github"></i></a></li><li class=icon><a href=https://www.linkedin.com/in/andy-grunwald-09aa265a rel=me title=LinkedIn><i class="fab fa-fw fa-linkedin"></i></a></li><li class=icon><a href=https://twitter.com/andygrunwald rel=me title=Twitter><i class="fab fa-fw fa-twitter"></i></a></li><li class=icon><a href=https://meetup.com/Web-Engineering-Duesseldorf/ rel=me title=Meetup><i class="fab fa-fw fa-meetup"></i></a></li></ul></nav></header><div class=content><article><header><h1 class=title>Migrate your local PHP 7.2 setup to Homebrew v1.5.*</h1><p class=meta>April 10, 2018 &#183; 4 minute read
&#183; Tags:
<a href=https://andygrunwald.com/tags/engineering/>Engineering</a>
, <a href=https://andygrunwald.com/tags/open-source/>Open Source</a>
, <a href=https://andygrunwald.com/tags/php/>PHP</a>
, <a href=https://andygrunwald.com/tags/programming/>Programming</a></p></header><section class=post-content><p>Last week, <a href=https://twitter.com/hanspuac title="Hans Puac at twitter">Hans Puac</a>, a colleague of mine, wrote a small guide into our internal company chat on how to migrate your local PHP environment on macOS to the new Homebrew version 1.5.*.
The guide helped a lot of other engineers inside <a href=https://www.trivago.com/ title=trivago>trivago</a>.</p><p>I thought it might help more people from the internet.
I asked Hans if I am allowed to share it, and he approved.
So kudos belongs to him.</p><blockquote><p><strong>Update (July 2021): Homebrew project structure changed.</strong></p><p>Due to a new homebrew / tap structure, this article might not be up to date anymore.</p><p>Please check out the latest state of the <a href=https://formulae.brew.sh/formula/php title="PHP Homebrew formula">PHP Homebrew formula</a>.</p></blockquote><p>Here we go:</p><p>With Homebrew v1.5.0 the tap <code>homebrew/php</code> got deprecated.
They migrated it to <code>homebrew/core</code>, but this is changing the installation process completely.
If you want to migrate:</p><h2 id=1-cleanup>1. Cleanup</h2><p>Remove your currently installed PHP packages.
This is not 100% necessary, but I wanted to have it clean.</p><p>You can check what packages are installed via <code>brew list | grep php</code>, for example, and remove via <code>brew remove MYPACKAGE</code>.
Check for leftovers in <code>/usr/local/etc/php/</code> and remove if necessary.
Untap the deprecated repo <code>brew untap homebrew/php</code>.
You can check your taps with <code>brew tap</code>.
I also had some other taps that I directly untapped as well because those were deprecated:</p><ul><li><code>brew untap homebrew/science</code></li><li><code>brew untap homebrew/versions</code></li></ul><h2 id=2-update>2. Update</h2><p><code>brew update</code></p><h2 id=3-install-php>3. Install PHP</h2><p>Install PHP via <code>brew install php@7.2</code></p><h2 id=4-verify-installation>4. Verify Installation</h2><p>Before we continue, we want to ensure that the</p><ul><li>PHP installation was successful</li><li><a href=https://en.wikipedia.org/wiki/PATH_(variable)>PATH</a> is set properly</li><li><a href=https://pear.php.net/>PEAR</a> is configured properly</li></ul><p>Run <code>php --version</code>, <code>php --ini</code> and <code>pear config-show | grep php.ini</code> and check if everything is pointing to the right
PHP version and that no warnings are displayed.</p><p>If you encounter any problems, check the <a href=https://andygrunwald.com/blog/migrate-your-local-php-7.2-setup-to-homebrew-v1.5./#troubleshooting title="Troubleshooting your PHP Homebrew setup">Troubleshooting</a> section
below.</p><h2 id=5-install-extensions>5. Install Extensions</h2><p>The <code>intl</code> is now already built-in.
Install all other required extensions via <a href=https://pecl.php.net/>PECL</a> (gets installed together with PHP).</p><p>Installation via pecl requires autoconf (<code>brew install autoconf</code>):</p><ul><li><code>pecl install xdebug</code></li><li><code>pecl install redis</code></li><li><code>pecl install apcu</code></li><li><code>pecl install memcached</code></li><li><code>pecl install imagick</code>
&mldr;</li></ul><h3 id=particular-version-of-an-extension>Particular version of an extension</h3><p>If your app depends on a particular version of an extension, e.g. <a href=https://pecl.php.net/package/redis title="PECL Redis Extension">redis in v3.1.6</a>
specify the version explicitly via <code>pecl install redis-3.1.6</code>.</p><h3 id=extension-snmp>Extension <code>snmp</code></h3><p>If you rely on the <a href=https://www.php.net/manual/en/book.snmp.php title="PHP SNMP Extension">SNMP Extension</a>, I have to disappoint you right now.
This extension is, state of now (2018-04-10), not part of this PHP build:</p><blockquote><p>SNMP was excluded from the build because it crashes Apache.</p></blockquote><h2 id=6-cleanup>6. Cleanup</h2><p>To make some disk space accessible, you may remove old versions of packages by executing <code>brew cleanup -s</code>.</p><h2 id=troubleshooting>Troubleshooting</h2><h3 id=wrong-php-version-is-displayed>Wrong PHP Version is displayed</h3><p>If <code>php --version</code> displays the wrong PHP version, try to open a new terminal window. The <a href=https://en.wikipedia.org/wiki/PATH_(variable)>PATH</a> variable got
adjusted during the PHP installation and might not be loaded in your current terminal session.</p><p>If the old version is still displayed, check your <a href=https://en.wikipedia.org/wiki/PATH_(variable)>PATH</a> (<code>echo $PATH</code>) and ensure that <code>/usr/local/bin/</code> comes before
<code>/usr/bin/</code> or uninstall the other PHP version if the <a href=https://en.wikipedia.org/wiki/PATH_(variable)>PATH</a> was already set properly. The commands
<code>ls -la $(which php)</code> and <code>brew list | grep php</code> might help you find out where that version is coming from.</p><h3 id=pear-configuration-is-pointing-to-the-wrong-phpini-file><a href=https://pear.php.net/>PEAR</a> configuration is pointing to the wrong <code>php.ini</code> file</h3><p>If <code>pear config-show | grep php.ini</code> is pointing to the wrong <code>php.ini</code> file, you can overwrite it with
<code>pear config-set php_ini /MY/RIGHT/PATH/php.ini</code>. You can find out the right path with <code>php --ini</code>.</p><h3 id=module-already-loaded--unable-to-load-library>Module already loaded / Unable to load library</h3><p>Example Warnings:</p><ul><li><code>PHP Warning: Module '[some module]' already loaded in Unknown on line 0</code></li><li><code>PHP Warning: PHP Startup: Unable to load dynamic library '[some module]' ([...]) in Unknown on line 0</code></li></ul><p>During the installation of an extension, pecl adds the extension to the <code>php.ini</code> file but not removing it
during uninstall. In this case, edit your <code>php.ini</code> manually and remove deprecated <code>extension="[some module]"</code> lines.</p><h2 id=resources>Resources</h2><ul><li><a href=https://brew.sh/2018/01/19/homebrew-1.5.0/ title="Homebrew v1.5.0 release announcement">Homebrew 1.5.0 release announcement</a></li><li><a href=https://discourse.brew.sh/t/php-load-and-tap-errors-with-latest-brew/1956/2>PHP load and tap errors with latest brew @ brew discourse</a></li></ul></section></article><div class="comments related-posts"><h3>Continue reading</h3><ul><li><a href=https://andygrunwald.com/blog/your-database-connection-deserves-a-name/>your database connection deserves a name</a></li><li><a href=https://andygrunwald.com/blog/resources-to-learn-golang/>Resources to learn Go(lang)</a></li><li><a href=https://andygrunwald.com/blog/i-cant-wash-my-clothes-without-open-source/>I can't wash my clothes without Open Source</a></li><li><a href=https://andygrunwald.com/blog/typo3-analytics-goes-jacobine/>TYPO3-Analytics goes Jacobine</a></li><li><a href=https://andygrunwald.com/blog/typo3-analytics-release-of-version-v0.1.0/>TYPO3-Analytics: Release of version v0.1.0</a></li></ul></div></div><footer class=site-footer><p class=text>&copy; 2022 - Andy Grunwald</p></footer><script type=application/javascript>var dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes",GA_SESSION_STORAGE_KEY;doNotTrack||(function(a,e,f,g,b,c,d){a.GoogleAnalyticsObject=b,a[b]=a[b]||function(){(a[b].q=a[b].q||[]).push(arguments)},a[b].l=1*new Date,c=e.createElement(f),d=e.getElementsByTagName(f)[0],c.async=1,c.src=g,d.parentNode.insertBefore(c,d)}(window,document,'script','https://www.google-analytics.com/analytics.js','ga'),window.sessionStorage&&(GA_SESSION_STORAGE_KEY='ga:clientId',ga('create','UA-64342623-1',{storage:'none',clientId:sessionStorage.getItem(GA_SESSION_STORAGE_KEY)}),ga(function(a){sessionStorage.setItem(GA_SESSION_STORAGE_KEY,a.get('clientId'))})),ga('set','anonymizeIp',!0),ga('send','pageview'))</script></body></html>